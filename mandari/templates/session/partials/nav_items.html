{% load static %}

{% with current_url=request.resolver_match.url_name %}

<!-- Dashboard -->
<a href="{% url 'session:dashboard' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if current_url == 'dashboard' or current_url == 'dashboard_explicit' %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
    Dashboard
</a>

<!-- Sitzungen -->
{% if permission_checker.has_permission "view_meetings" %}
<a href="{% url 'session:meetings' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'meeting' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="calendar" class="w-5 h-5"></i>
    Sitzungen
</a>
{% endif %}

<!-- Vorlagen -->
{% if permission_checker.has_permission "view_papers" %}
<a href="{% url 'session:papers' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'paper' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="file-text" class="w-5 h-5"></i>
    Vorlagen
</a>
{% endif %}

<!-- Anträge -->
{% if permission_checker.has_permission "view_applications" %}
<a href="{% url 'session:applications' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'application' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="inbox" class="w-5 h-5"></i>
    Anträge
    {% if pending_applications_count %}
    <span class="ml-auto inline-flex items-center justify-center px-2 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
        {{ pending_applications_count }}
    </span>
    {% endif %}
</a>
{% endif %}

<div class="my-4 border-t border-gray-200 dark:border-gray-700"></div>

<!-- Gremien -->
<a href="{% url 'session:organizations' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'organization' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="users" class="w-5 h-5"></i>
    Gremien
</a>

<!-- Personen -->
<a href="{% url 'session:persons' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'person' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="user" class="w-5 h-5"></i>
    Personen
</a>

{% if permission_checker.has_permission "manage_settings" %}
<div class="my-4 border-t border-gray-200 dark:border-gray-700"></div>

<!-- Einstellungen -->
<a href="{% url 'session:settings' tenant_slug=tenant_slug %}"
   class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if 'settings' in current_url or 'users' in current_url %}bg-primary-50 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700{% endif %}">
    <i data-lucide="settings" class="w-5 h-5"></i>
    Einstellungen
</a>
{% endif %}

{% endwith %}

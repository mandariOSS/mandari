# =============================================================================
# Mandari 2.0 - Production Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit the .env file to version control!
# =============================================================================

# =============================================================================
# Application
# =============================================================================
SITE_URL=https://mandari.de

# Allowed hosts (comma-separated, must match your domain)
ALLOWED_HOSTS=mandari.de,www.mandari.de

# CSRF trusted origins (comma-separated, full URLs with protocol)
CSRF_TRUSTED_ORIGINS=https://mandari.de,https://www.mandari.de

SECRET_KEY=your-super-secret-key-change-this-in-production-must-be-at-least-50-chars

# Encryption key for sensitive data (base64-encoded 32-byte key)
# Generate with: python -c "import secrets; import base64; print(base64.b64encode(secrets.token_bytes(32)).decode())"
ENCRYPTION_MASTER_KEY=your-base64-encoded-encryption-key

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
POSTGRES_USER=mandari
POSTGRES_PASSWORD=change-this-to-a-strong-password
POSTGRES_DB=mandari

# Replication password (for PostgreSQL streaming replication)
REPLICATION_PASSWORD=another-strong-password-for-replication

# =============================================================================
# Cache (Redis)
# =============================================================================
REDIS_MAXMEMORY=512mb

# =============================================================================
# Search (Meilisearch)
# =============================================================================
# Generate with: openssl rand -base64 32
MEILISEARCH_KEY=your-meilisearch-master-key

# =============================================================================
# Ingestor Configuration
# =============================================================================
# Sync interval in minutes
INGESTOR_INTERVAL=10

# Hour to run full sync (0-23, 3 = 3:00 AM)
INGESTOR_FULL_SYNC_HOUR=3

# Concurrent sync workers
INGESTOR_CONCURRENT=20

# =============================================================================
# Hetzner DNS (for Let's Encrypt DNS-01 challenge)
# =============================================================================
# Required for automatic SSL certificate generation behind Load Balancer
# Create token at: Hetzner Cloud Console → DNS → API Tokens
HETZNER_DNS_API_TOKEN=your-hetzner-dns-api-token

# =============================================================================
# Network Configuration (for slave/replica)
# =============================================================================
# Private IP of the master server (used by slave for replication)
# Hetzner private network: 10.0.0.0/16
# LB: 10.0.0.2, Master: 10.0.0.3, Slave: 10.0.0.4
MASTER_PRIVATE_IP=10.0.0.3

# =============================================================================
# Data Directories
# =============================================================================
# Base directory for persistent data (mounted volume)
DATA_DIR=/mnt/data

# =============================================================================
# Docker Registry
# =============================================================================
# Docker images (hardcoded in docker-compose):
# - ghcr.io/mandarioss/mandari    (Django app)
# - ghcr.io/mandarioss/ingestor   (OParl sync)

# Image tag to deploy
IMAGE_TAG=latest

# =============================================================================
# Email Configuration (optional - can also be set in Django admin)
# =============================================================================
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_HOST_USER=your-smtp-user
# EMAIL_HOST_PASSWORD=your-smtp-password
# EMAIL_USE_TLS=true
# DEFAULT_FROM_EMAIL=noreply@mandari.de

# =============================================================================
# Backup Configuration (optional)
# =============================================================================
# S3_BUCKET=mandari-backups
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_DEFAULT_REGION=eu-central-1

# =============================================================================
# Monitoring (optional)
# =============================================================================
# SENTRY_DSN=https://xxx@sentry.io/xxx

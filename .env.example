# =============================================================================
# Mandari - Community Edition
# Environment Configuration Template
# =============================================================================
#
# QUICK START:
#   Option 1 (Recommended): Run the interactive installer
#     ./install.sh
#
#   Option 2: Manual setup
#     cp .env.example .env
#     # Edit .env with your values
#     docker compose up -d
#
# IMPORTANT:
#   - Never commit .env to version control!
#   - Back up .env securely - it contains encryption keys
#   - Changing encryption keys after installation will make data unreadable
# =============================================================================


# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Domain & SSL
# -----------------------------------------------------------------------------
# Your domain name (e.g., mandari.example.com)
# For local testing, use "localhost" (HTTPS will be disabled)
DOMAIN=localhost

# Email for Let's Encrypt SSL certificate notifications
# Required when DOMAIN is not localhost
ACME_EMAIL=admin@example.com

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Database credentials - CHANGE THESE!
POSTGRES_USER=mandari
POSTGRES_PASSWORD=CHANGE_ME_to_a_secure_password
POSTGRES_DB=mandari

# -----------------------------------------------------------------------------
# Security Keys - GENERATE THESE!
# -----------------------------------------------------------------------------
# Django secret key (min. 50 characters)
# Generate with: openssl rand -base64 50
SECRET_KEY=CHANGE_ME_generate_with_openssl_rand_base64_50

# Encryption key for sensitive data (Base64-encoded 32 bytes)
# Generate with: openssl rand -base64 32
# WARNING: Changing this after installation will make encrypted data unreadable!
ENCRYPTION_MASTER_KEY=CHANGE_ME_generate_with_openssl_rand_base64_32

# Meilisearch API key (min. 16 characters)
# Generate with: openssl rand -base64 32
MEILISEARCH_KEY=CHANGE_ME_generate_with_openssl_rand_base64_32


# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Timezone
# -----------------------------------------------------------------------------
TZ=Europe/Berlin

# -----------------------------------------------------------------------------
# Resources
# -----------------------------------------------------------------------------
# Redis memory limit (e.g., 256mb, 512mb, 1gb)
REDIS_MAXMEMORY=256mb

# -----------------------------------------------------------------------------
# OParl Ingestor (Data Synchronization)
# -----------------------------------------------------------------------------
# How often to check for updates (minutes)
INGESTOR_INTERVAL=15

# Hour for daily full sync (0-23, 3 = 3:00 AM)
INGESTOR_FULL_SYNC_HOUR=3

# Number of concurrent sync workers
INGESTOR_CONCURRENT=10

# -----------------------------------------------------------------------------
# Docker Image Version
# -----------------------------------------------------------------------------
# Which version to deploy (latest, v1.0.0, etc.)
IMAGE_TAG=latest


# =============================================================================
# OPTIONAL: Email Configuration
# =============================================================================
# Uncomment and configure to enable email notifications
# Can also be configured in Django Admin after installation

# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_HOST_USER=your-smtp-user
# EMAIL_HOST_PASSWORD=your-smtp-password
# EMAIL_USE_TLS=true
# DEFAULT_FROM_EMAIL=noreply@example.com


# =============================================================================
# OPTIONAL: AI Services
# =============================================================================
# GROQ_API_KEY=
# OPENAI_API_KEY=


# =============================================================================
# OPTIONAL: Monitoring & Logging
# =============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://xxx@sentry.io/xxx


# =============================================================================
# OPTIONAL: S3 Backup Configuration
# =============================================================================
# Configure for automated off-site backups

# S3_BUCKET=mandari-backups
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_DEFAULT_REGION=eu-central-1


# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Only for local development - do NOT use in production!

# For development only:
# DEBUG=true
# ENVIRONMENT=development

# Direct URLs (for development without Docker):
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/mandari
# REDIS_URL=redis://localhost:6379
# MEILISEARCH_URL=http://localhost:7700

# CORS for frontend development:
# CORS_ORIGINS=http://localhost:5173,http://localhost:3000


# =============================================================================
# QUICK REFERENCE: Generating Secure Values
# =============================================================================
#
# PostgreSQL Password (alphanumeric, 32 chars):
#   openssl rand -base64 24 | tr -dc 'a-zA-Z0-9' | head -c 32
#
# Django Secret Key (50+ chars):
#   openssl rand -base64 50
#
# Encryption Key (32 bytes, base64):
#   openssl rand -base64 32
#
# Meilisearch Key:
#   openssl rand -base64 32
#
# =============================================================================
